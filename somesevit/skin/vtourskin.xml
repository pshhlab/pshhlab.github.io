<krpano>
	
	<!-- style thanh cong cu-->
	<style name="toolbar" url="%FIRSTXML%/skin/toolbar.png" />
	<style name="loadinglogo" url="%FIRSTXML%/copyright/loadinglogo.png" scale="0.5" align="lefttop" />
	<plugin name="tickerstring" url="%FIRSTXML%/plugins/string.swf" alturl="%FIRSTXML%/plugins/string.js" keep="true" preload="true" />

	<!-- logo somesevit -->
	<layer name="somesevitlogo_bg" keep="true" type="container" align="lefttop" width="100" height="100" visible="true" scale="0.8" scalechildren="true">
		<layer name="sevitlogo" url="%FIRSTXML%/skin/somesevitlogo.png" align="left" y="5" onclick="openurl('http://somesevit.com', _blank);"/>
	</layer>

	<style name="hotspot_ani_white"
	       url="%FIRSTXML%/hotspots/hotspot_ani_white_40x40x20.png"
	       crop="0|0|40|40"
	       framewidth="40" frameheight="40" frame="0" lastframe="19"
	       onloaded="hotspot_animate();"
	       />
    <action name="hotspot_animate">
		inc(frame,1,get(lastframe),0);
		mul(ypos,frame,frameheight);
		txtadd(crop,'0|',get(ypos),'|',get(framewidth),'|',get(frameheight));
		delayedcall(0.05, if(loaded, hotspot_animate() ) );
	</action>

	<!-- ban do -->
	<layer name="mapcontainer" type="container" bgcolor="0xffffff" bgalpha="0.9" align="center" width="40%" height="40%" visible="false" keep="true">
		<plugin name="map" keep="true"
		        url.html5="%SWFPATH%/plugins/googlemaps.js"
		        url.flash="%SWFPATH%/plugins/bingmaps.swf"
		        align="center" width="-4" height="-4" alpha="0.9"
		        key="An4-9WoANqtASVorNezSjENest2VC0zoAzvMhEpdTjb3uY-k6u6bMkPxYpDsolsF"
		        maptype="normal"
		        lat="37.514554" lng="126.989335" zoom="16">
			<spot name="spot0a1" lat="37.511380" lng="126.995365" heading="0" active="false" onclick="loadscene(s0a1,null,MERGE,BLEND(1));"/>
			<spot name="spot0a2" lat="37.511929" lng="126.995408" heading="0" active="false" onclick="loadscene(s0a2,null,MERGE,BLEND(1));"/>
			<spot name="spot1a1" lat="37.511516" lng="126.995129" heading="0" active="false" onclick="loadscene(s1a1,null,MERGE,BLEND(1));"/>
			<spot name="spot2a1" lat="37.512201" lng="126.995901" heading="0" active="false" onclick="loadscene(s2a1,null,MERGE,BLEND(1));"/>
			<spot name="spot3a1" lat="37.512375" lng="126.994871" heading="0" active="false" onclick="loadscene(s3a1,null,MERGE,BLEND(1));"/>
			<maptypecontrol visible="true" align="lefttop" x="2" y="2" buttonalign="H" buttontexts="Map|Satellite|Hybrid" scale="0.5"/>
		</plugin>
			
		<layer name="close_box" type="container" align="lefttop" x="0" y="0" width="18" height="18" keep="true" bgcolor="0x666666" bgalpha="0.9" >
			<layer name="close_bt" style="toolbar" align="center" crop="610|6|20|24" scale="0.8" onclick="set(layer[mapcontainer].visible,false); tween(layer[map_box].bgalpha,0,0.3); switch(layer[map_box].status,0,1);" />
		</layer>	
	</layer>	
	<action name="spotactive">
		set(plugin[map].spot[spot0a1].active,'false');
		set(plugin[map].spot[spot0a2].active,'false');
		set(plugin[map].spot[spot1a1].active,'false');
		set(plugin[map].spot[spot2a1].active,'false');
		set(plugin[map].spot[spot3a1].active,'false');
		set(plugin[map].spot[%1].active,'true');
	</action>
	
	<!-- khung hien thi phu de scene -->
	<layer name="textbox" type="container" align="righttop" x="-250" y="50" width="250" height="300" bgcolor="0xffffff" bgalpha="0.9" keep="true">
		<layer name="textmask" type="container" align="lefttop" x="2" y="2" width="236" height="276" bgcolor="0x000000" bgalpha="0.5" maskchildren="true">
			<layer name="textscroller" url="%SWFPATH%/plugins/scrollarea.swf" alturl="%SWFPATH%/plugins/scrollarea.js" mwheel="true" direction="v" overscroll="0" align="top" width="-4" height="100%" onscroll="if(hoverflow GT 0, div(yp,toverflow,hoverflow);Math.min(yp,1);Math.max(yp,0); copy(th,layer[scrollbar].pixelheight);sub(th,layer[scrollslider].pixelheight); mul(yp,th);copy(layer[scrollslider].y,yp); );">
				<layer name="text" url="%SWFPATH%/plugins/textfield.swf" align="lefttop" x="0" y="0" width="100%" autoheight="true" background="false" border="false" onautosized="copy(layer[textscroller].height, height);"
				       html=""
				       css="text-align:justify; color:#ffffff; font-family:Tahoma; font-size:12px;"
				       />
			</layer>
		</layer>
		<layer name="scrollbar" type="container" bgcolor="0x000000" bgalpha="0.6" align="righttop" x="1" y="2" width="10" height="-24" zorder="33">
			<layer name="scrollslider" url="%SWFPATH%/skin/sliderbutton.png" align="righttop" x="1"  y="0" ondown="if(layer[textscroller].hoverflow GT 0, copy(cy,y);copy(sy,mouse.stagey);dragging(); );" dragging="if(pressed, sub(dy,mouse.stagey,sy);add(ny,cy,dy);Math.max(ny,0); copy(th,layer[scrollbar].pixelheight);sub(th,layer[scrollslider].pixelheight);Math.min(ny,th); copy(y,ny); div(ny,th); copy(fh,layer[textscroller].hoverflow); mul(fh,-1); mul(ny,fh); layer[textscroller].stopscrolling(); copy(layer[textscroller].y,ny); delayedcall(0,dragging()); );" />
		</layer>
		<layer name="copyright_box" type="container" align="bottom" x="0" y="0" width="100%" height="20" keep="true" >
			<layer name="madebytext" url="%SWFPATH%/plugins/textfield.swf" align="left" x="6" width="100%" height="20"
				border="false" background="false" 
				css="text-align:left; color:#666666; font-family:Tahoma; font-weight:bold; font-size:10px;"
				html=""
				onloaded="set(layer[madebytext].html, get(strings[get(language)].madebytext));"
				/>
			<layer name="copyrightlogo" url="%FIRSTXML%/copyright/copyright.png"  align="right" x="6" onclick="openurl('http://360pro.vn', _blank);" />
		</layer>
		<layer name="submenu_box" type="container" align="lefttop" x="-32" y="0" width="32" height="92" bgcolor="0x333333" bgalpha="0.9" keep="true" >
			<layer name="map_box" type="container" align="top" y="0" width="30" height="30" keep="true" bgcolor="0x000000" bgalpha="0" status="0" >
				<layer name="map_bt" style="toolbar" tooltip="" align="center" crop="252|0|26|30" onhover="tween(layer[map_box].bgalpha,0.9,0.3);" onout="if(layer[map_box].status=='0',tween(layer[map_box].bgalpha,0,0.3));" onclick="if(layer[map_box].status==0, set(layer[mapcontainer].visible,true), set(layer[mapcontainer].visible,false)); switch(layer[map_box].status,0,1);" />
			</layer>	
			<layer name="info_box" type="container" align="top" y="30" width="30" height="30" keep="true" bgcolor="0x000000" bgalpha="0" status="0" >
				<layer name="info_bt" style="toolbar" tooltip="" align="center" crop="278|0|20|30" onhover="tween(layer[info_box].bgalpha,0.9,0.3);" onout="if(layer[info_box].status=='0',tween(layer[info_box].bgalpha,0,0.3));" onclick="if(layer[info_box].status ==1, tween(layer[textbox].x, -250, 1); tween(layer[info_box].bgalpha,0,0.3);, tween(layer[textbox].x, 0, 1); tween(layer[info_box].bgalpha,0.9,0.3);); switch(layer[info_box].status,0,1);" />
			</layer>	
			<layer name="language_box" type="container" align="top" y="60" width="30" height="30" keep="true" bgcolor="0x000000" bgalpha="0" status="0" >
				<layer name="language_bt" style="toolbar" tooltip="" align="center" crop="300|0|20|30" scale="0.8" onclick="if(layer[language_bt].crop =='300|0|20|30', set(language,'korean'); set(layer[language_bt].crop,'330|0|25|30');, set(language, 'english'); set(layer[language_bt].crop,'300|0|20|30');); languagechange();"/>
			</layer>	
		</layer>
	</layer>
	<action name="updatetext">
		txtadd(temp,'strings[get(language)].',get(textinbox)); copy(layer[text].html, get(temp));
	</action>
	<action name="languagechange">
		set(layer[madebytext].html, get(strings[get(language)].madebytext));
		txtadd(temp,'strings[get(language)].',get(textinbox)); copy(layer[text].html, get(temp));
	</action>
	
	<!-- toolbar -->	
	<layer name="facebook" url="%FIRSTXML%/skin/socialnetworks.jpg" align="leftbottom" y="-31" crop="0|0|30|30" width="30" height="30" keep="true" onclick="openurl('http://facebook.com/share.php?u=http://360pro.vn/data/korea/somesevit/tour.html', _blank);" />				
	<layer name="tweeter" url="%FIRSTXML%/skin/socialnetworks.jpg" align="leftbottom" x="30" y="-31" crop="30|0|30|30" width="30" height="30" keep="true" onclick="openurl('https://twitter.com/intent/tweet?url=http://360pro.vn/data/korea/somesevit/tour.html', _blank);" />				
	<layer name="gplus" url="%FIRSTXML%/skin/socialnetworks.jpg" align="leftbottom" x="60" y="-31" crop="60|0|30|30" width="30" height="30" keep="true" onclick="openurl('https://plus.google.com/share?url=http://360pro.vn/data/korea/somesevit/tour.html', _blank);" />				
	
	<layer name="toolbar_bg" type="container" align="bottom" width="100%" height="30" bgcolor="0x333333" bgalpha="0.8" keep="true" >
		<!-- phong to thu nho -->
		<layer name="fullsr_box" type="container" align="right" width="40" height="30" keep="true" bgcolor="0x000000" bgalpha="0" status="0" >
			<layer name="fullsr_bt" style="toolbar|tooltip" tooltip="" align="center" crop="0|0|30|30" onhover="set(tooltip, get(strings[get(language)].fullsrButton)); hientooltip(); tween(layer[fullsr_box].bgalpha,0.9,0.3);" onout="tween(layer[tooltip].alpha, 0.0, 0.25, default); if(layer[fullsr_box].status=='0',tween(layer[fullsr_box].bgalpha,0,0.3));" onclick="switch(fullscreen); switch(layer[fullsr_box].status,0,1);" />
		</layer>
		<!-- tu dong quay -->
		<layer name="rotate_box" type="container" align="right" x="40" width="40" height="30" keep="true" bgcolor="0x000000" bgalpha="0.9" status="1" >
			<layer name="rotate_bt" style="toolbar|tooltip" tooltip="" align="center" crop="30|0|30|30" onhover="set(tooltip, get(strings[get(language)].rotateButton)); hientooltip(); tween(layer[rotate_box].bgalpha,0.9,0.3);" onout="tween(layer[tooltip].alpha, 0.0, 0.25, default); if(layer[rotate_box].status=='0',tween(layer[rotate_box].bgalpha,0,0.3));" onclick="switch(autorotate.enabled); switch(layer[rotate_box].status,0,1);" />
		</layer>
		<!-- chia se mang xa hoi -->
		<layer name="social_box" type="container" align="left" width="40" height="30" keep="true" bgcolor="0x000000" bgalpha="0" status="0" >
			<layer name="social_bt" style="toolbar|tooltip" tooltip="" align="center" crop="60|0|30|30" onhover="if(layer[social_box].status=='0',hientooltip(); set(tooltip, get(strings[get(language)].socialButton));); tween(layer[social_box].bgalpha,0.9,0.3);" onout="tween(layer[tooltip].alpha, 0.0, 0.25, default); if(layer[social_box].status=='0',tween(layer[social_box].bgalpha,0,0.3));" onclick="if(layer[social_box].status=='0',tween(layer[facebook].y,30,0.5); delayedcall(0.2, tween(layer[tweeter].y,30,0.5)); delayedcall(0.4, tween(layer[gplus].y,30,0.5));, tween(layer[facebook].y,-31,0.5); tween(layer[tweeter].y,-31,0.5); tween(layer[gplus].y,-31,0.5);); switch(layer[social_box].status,0,1);" />
		</layer>
		<!-- trinh chieu tu dong -->
		<layer name="autoplay_box" type="container" align="center" width="50" height="30" keep="true" bgcolor="0x000000" bgalpha="0" >
			<layer name="autoplay_bt" style="toolbar|tooltip" tooltip="" align="center" crop="90|0|33|30" onhover="set(tooltip, get(strings[get(language)].autoPlayButton)); hientooltip(); tween(layer[autoplay_box].bgalpha,0.9,0.3);" onout="tween(layer[tooltip].alpha, 0.0, 0.25, default); tween(layer[autoplay_box].bgalpha,0,0.3);" onclick="set(autoplay, true); tween(layer[tooltip].alpha, 0.0, 0.25, default); autoShow();" />
		</layer>
		<!-- next scene -->
		<layer name="next_box" type="container" align="center" x="150" width="80" height="30" keep="true" bgcolor="0x000000" bgalpha="0" >
			<layer name="next_bt" style="toolbar|tooltip" tooltip="" align="center" crop="125|0|48|30" onhover="set(tooltip, get(strings[get(language)].nextButton)); hientooltip(); tween(layer[next_box].bgalpha,0.9,0.3);" onout="tween(layer[tooltip].alpha, 0.0, 0.25, default); tween(layer[next_box].bgalpha,0,0.3);" onclick="nextscene();" />
		</layer>
		<!-- previous scene -->
		<layer name="previous_box" type="container" align="center" x="-150" width="80" height="30" keep="true" bgcolor="0x000000" bgalpha="0" >
			<layer name="previous_bt" style="toolbar|tooltip" tooltip="" align="center" crop="170|0|78|30" onhover="set(tooltip, get(strings[get(language)].previousButton)); hientooltip(); tween(layer[previous_box].bgalpha,0.9,0.3);" onout="tween(layer[tooltip].alpha, 0.0, 0.25, default); tween(layer[previous_box].bgalpha,0,0.3);" onclick="previousscene();" />
		</layer>
		
		<layer name="avatarbarcon" keep="true" type="container" align="top" width="100%" height="84" x="0" y="-86">
			<layer name="scrollarea" url="%FIRSTXML%/plugins/scrollarea.swf" alturl="%FIRSTXML%/plugins/scrollarea.js" align="center" width="448" height="100%" direction="h" onloaded="setcenter(0,0)" >
				<layer name="thumbb_s1" keep="true" type="container" width="146" height="84" align="lefttop" x="0" y="0" bgcolor="0xffffff" bgalpha="0.9">
					<layer name="thumb_s1" url="%FIRSTXML%/panos/s1a1/thumb.jpg" style="tooltip" keep="true" width="142" height="80" align="lefttop" x="2" y="2" onhover="set(tooltip, get(strings[get(language)].s1title)); hientooltip();" onout="tween(layer[tooltip].alpha, 0.0, 0.25, default);" onclick="loadscene(s1a1, null, MERGE, BLEND(0.5));" />
				</layer>
				<layer name="thumbb_s2" keep="true" type="container" width="146" height="84" align="lefttop" x="151" y="0" bgcolor="0xffffff" bgalpha="0.9">
					<layer name="thumb_s2" url="%FIRSTXML%/panos/s2a1/thumb.jpg" style="tooltip" keep="true" width="142" height="80" align="lefttop" x="2" y="2" onhover="set(tooltip, get(strings[get(language)].s2title)); hientooltip();" onout="tween(layer[tooltip].alpha, 0.0, 0.25, default);" onclick="loadscene(s2a1, null, MERGE, BLEND(0.5));" />
				</layer>
				<layer name="thumbb_s3" keep="true" type="container" width="146" height="84" align="lefttop" x="302" y="0" bgcolor="0xffffff" bgalpha="0.9">
					<layer name="thumb_s3" url="%FIRSTXML%/panos/s3a1/thumb.jpg" style="tooltip" keep="true" width="142" height="80" align="lefttop" x="2" y="2" onhover="set(tooltip, get(strings[get(language)].s3title)); hientooltip();" onout="tween(layer[tooltip].alpha, 0.0, 0.25, default);" onclick="loadscene(s3a1, null, MERGE, BLEND(0.5));" />
				</layer>
			</layer>
		</layer>	
	</layer>

	
	<action name="clearthumbborder">
		set(layer[thumbb_s1].bgalpha, 0.3);
		set(layer[thumbb_s2].bgalpha, 0.3);
		set(layer[thumbb_s3].bgalpha, 0.3);
		set(layer[%1].bgalpha, 0.9);
	</action>
	
	<!-- action xem scene ke tiep-->
	<action name="nextscene">
		if(scenename == s0a1,delayedcall(0.1, loadscene(s0a2, null, MERGE, BLEND(0.5)))); 
		if(scenename == s0a2,delayedcall(0.1, loadscene(s1a1, null, MERGE, BLEND(0.5)))); 
		if(scenename == s1a1,delayedcall(0.1, loadscene(s2a1, null, MERGE, BLEND(0.5)))); 
		if(scenename == s2a1,delayedcall(0.1, loadscene(s3a1, null, MERGE, BLEND(0.5)))); 
		if(scenename == s3a1,delayedcall(0.1, loadscene(s0a1, null, MERGE, BLEND(0.5)))); 
	</action>
	<!-- action xem scene truoc do-->
	<action name="previousscene">
		if(scenename == s0a1,delayedcall(0.1, loadscene(s3a1, null, MERGE, BLEND(0.5)))); 
		if(scenename == s0a2,delayedcall(0.1, loadscene(s0a1, null, MERGE, BLEND(0.5)))); 
		if(scenename == s1a1,delayedcall(0.1, loadscene(s0a2, null, MERGE, BLEND(0.5)))); 
		if(scenename == s2a1,delayedcall(0.1, loadscene(s1a1, null, MERGE, BLEND(0.5)))); 
		if(scenename == s3a1,delayedcall(0.1, loadscene(s2a1, null, MERGE, BLEND(0.5)))); 
	</action>
	
	<!-- action trinh chieu tu dong-->
	<action name="autoShow">
		set(layer[autoplay_box].visible, false); 
		chaytext();
		set(layer[fullsr_box].visible, false); set(layer[rotate_box].visible, false); set(layer[social_box].visible, false); set(layer[next_box].visible, false); set(layer[previous_box].visible, false);
		set(layer[tickertextbox].visible, true);
		oninterrupt(set(autoplay, 'false'); showBar(); break;);
		if(scenename == s0a1, oninterrupt(set(autoplay, 'false'); showBar(); break;); lookat(0,0, 120); lookto(360,0,120,linear(3),false); loadscene(s0a2,null,MERGE,BLEND(1)););
		if(scenename == s0a2, oninterrupt(set(autoplay, 'false'); showBar(); break;); lookat(0,0, 120); lookto(360,0,120,linear(3),false); loadscene(s1a1,null,MERGE,BLEND(1)););
		if(scenename == s1a1, oninterrupt(set(autoplay, 'false'); showBar(); break;); lookat(0,0, 120); lookto(360,0,120,linear(3),false); loadscene(s2a1,null,MERGE,BLEND(1)););
		if(scenename == s2a1, oninterrupt(set(autoplay, 'false'); showBar(); break;); lookat(0,0, 120); lookto(360,0,120,linear(3),false); loadscene(s3a1,null,MERGE,BLEND(1)););
		if(scenename == s3a1, oninterrupt(set(autoplay, 'false'); showBar(); break;); lookat(0,0, 120); lookto(360,0,120,linear(3),false); loadscene(s0a1,null,MERGE,BLEND(1)););
	</action>
	<action name="showBar">
		set(layer[tickertextbox].visible, false); set(layer[fullsr_box].visible, true); set(layer[rotate_box].visible, true); set(layer[social_box].visible, true); set(layer[autoplay_box].visible, true);
		set(layer[next_box].visible, true); set(layer[previous_box].visible, true);
		loadscene(get(scenename),null,MERGE,BLEND(1));
	</action>
	<layer name="tickertextbox" type="container" align="bottom" x="0" y="0" width="100%" height="30" visible="false" keep="true" >
		<layer name="tickertex" keep="true"
	       url="%FIRSTXML%/plugins/textfield.swf"
	       align="left"
		   x=""
		   y=""
		   autowidth="true"
	       autoheight="true"
	       background="false"
	       textshadow="1" textshadowrange="6.0" textshadowangle="90" textshadowcolor="0x000000" textshadowalpha="1.0"
	       css="text-align:left; color:#FFFFFF; font-family:Tahoma; font-weight:normal; font-size:15px;"
	       html=""
	       />
	</layer>
	<action name="chaytext">
		txtadd(tktext,"strings[get(language)].ticker",get(textinbox)); copy(layer[tickertex].html, get(tktext)); copy(temptext, get(tktext));
		plugin[tickerstring].txtlength(tkwidth, get(layer[tickertex].html));
		set(layer[tickertex].x, get(stagewidth));
		mul(tkwidth,40);
		add(tkdistance, get(tkwidth), get(stagewidth));
		div(tktime, get(tkdistance), 50);
		sub(tweenwidth, 0, get(tkdistance));
		div(tkmax, get(tkwidth), 40);
		if(layer[tickertex].html != null, for(set(i,0),i LT tkmax,inc(i),
			txtadd(layer[tickertex].html, get(layer[tickertex].html), get(temptext));
			), copy(layer[tickertex].html, ''););
		tween(layer[tickertex].x,get(tweenwidth),get(tktime),linear);
		)
	</action>

	<!-- thumb for hotspot -->
	<layer name="hotspotthumbbg" keep="true" type="container" width="146" height="84"  visible="false" align="lefttop" x="0" y="0" bgcolor="0xffffff" bgalpha="0.9">
		<layer name="hotspotthumb" url="" keep="true" width="142" height="80" align="lefttop" x="2" y="2"/>
	</layer>	
	<action name="hienthumb">
		sub(c, mouse.stagex, 0);
		sub(d, mouse.stagey, 100);
		set(layer[hotspotthumbbg].ox, '-50%');
		copy(layer[hotspotthumbbg].x, c); 
		copy(layer[hotspotthumbbg].y, d);
		set(layer[hotspotthumbbg].visible, true);
		txtadd(temp,'%FIRSTXML%/panos/',%1,'/thumb.jpg');
		set(layer[hotspotthumb].url, get(temp));
	</action>
	
	<!-- style tooltip plugin -->
	<style name="tooltip"
	       onover="copy(layer[tooltip].html, tooltip);
	               asyncloop(hovering, copy(layer[tooltip].html, tooltip););"
	       />
	<layer name="tooltip" keep="true"
	       url="%FIRSTXML%/plugins/textfield.swf"
	       visible="false" alpha="0"
	       enabled="false"
	       oy="-2"
	       autowidth="true"
	       autoheight="true"
	       background="true" backgroundcolor="0xffffff" backgroundalpha="0.9"
	       border="true" bordercolor="0x000000" borderalpha="0.9"
	       borderwidth="1.0"
	       shadow="0.0" shadowrange="4.0" shadowangle="45" shadowcolor="0xffffff" shadowalpha="0.7"
	       css="text-align:center; color:#000000; font-family:Tahoma; font-size:13px;"
	       html=""
	       />
	<action name="hientooltip">
		sub(c, mouse.stagex, 0);
		sub(d, mouse.stagey, 30);
		set(layer[tooltip].align, "lefttop");
		set(layer[tooltip].ox, '-50%');
		copy(layer[tooltip].x, c); 
		copy(layer[tooltip].y, d);
		set(layer[tooltip].visible, true);
	    tween(layer[tooltip].alpha, 1.0, 0.5);
	</action>
	<action name="hientooltip1">
		sub(c, mouse.stagex, 0);
		add(d, mouse.stagey, 30);
		set(layer[tooltip].align, "lefttop");
		set(layer[tooltip].ox, '-50%');
		copy(layer[tooltip].x, c); 
		copy(layer[tooltip].y, d);
		set(layer[tooltip].visible, true);
	    tween(layer[tooltip].alpha, 1.0, 0.5);
	</action>
	
	<action name="logoloading">
		txtadd(temp,'%FIRSTXML%/copyright/',get(partner),'.png');
		set(layer[loadinglogo].url,get(temp));
	</action>
	
	<events name="loadingbar" keep="true"
	        onxmlcomplete="loadingbar_startloading();"
	        onloadcomplete="delayedcall(0.25, loadingbar_stoploading());"
	        />

	<layer name="loadingbar_bg" keep="true" type="container" align="center" width="250" height="200" enabled="false" visible="false" scale="0.7" scalechildren="true">
		<layer name="loadinglogo" url="%FIRSTXML%/copyright/360pro.png" align="top" keep="true"/>
		<layer name="loadingbar_space" type="container" bgcolor="0xffffff" bgalpha="0.8" align="top" y="160" width="250" height="14">
			<layer name="loadingbar_fill" type="container" bgcolor="0x666666" bgalpha="0.9" align="left" width="0" height="12" />
		</layer>
	</layer>

	<action name="loadingbar_startloading">
		set(loadingbar_isloading, true);
		set(layer[loadingbar_bg].visible, true);
		asyncloop(loadingbar_isloading,
			mul(pv, progress.progress, 100);
			txtadd(pv, '%');
			copy(layer[loadingbar_fill].width, pv);
		  );
	</action>
	
	<action name="loadingbar_stoploading">
		set(loadingbar_isloading, false); 
		set(layer[loadingbar_bg].visible, false);
	</action>

	<!-- context menu -->
	<contextmenu>
		<item name="weblink" caption="Website: http://360pro.vn" />
		<item name="email" caption="Email: contact@360pro.vn" />
		<item name="fs" caption="FULLSCREEN" separator="true"/>
	</contextmenu>
	
</krpano>
